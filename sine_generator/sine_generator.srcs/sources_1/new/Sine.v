`timescale 1ns/1ps
module Sine #(
    parameter INPUT_BITS = 16,
    parameter OUTPUT_BITS = 18,
    parameter LUT_DEPTH_BITS = 10
) (
    input wire clk,
    input wire resetn,
    input wire [INPUT_BITS - 1: 0] theta,
    input wire validIn,
    output reg [OUTPUT_BITS - 1: 0] sineTheta,
    output reg validOut
);

    // LUT for Sine and Cosine
    reg [OUTPUT_BITS-1:0] sine_lut[2**LUT_DEPTH_BITS - 1:0]={0,804,1608,2412,3216,4020,4824,5628,6431,7234,8037,8840,9642,10444,11245,12046,12847,13647,14447,15246,16044,16842,17639,18436,19232,20027,20821,21615,22408,23200,23991,24781,25570,26359,27146,27932,28718,29502,30285,31067,31847,32627,33405,34182,34958,35733,36506,37277,38048,38817,39584,40350,41114,41877,42639,43398,44156,44913,45667,46420,47172,47921,48669,49415,50159,50901,51641,52379,53115,53850,54582,55312,56040,56766,57490,58211,58931,59648,60363,61076,61786,62495,63200,63904,64605,65303,65999,66693,67384,68073,68759,69442,70123,70801,71476,72149,72819,73487,74151,74813,75472,76128,76781,77432,78079,78724,79365,80004,80639,81272,81901,82527,83151,83771,84388,85002,85612,86220,86824,87425,88022,88616,89207,89795,90379,90960,91537,92111,92681,93248,93812,94372,94928,95481,96030,96576,97117,97656,98190,98721,99248,99772,100292,100807,101320,101828,102332,102833,103330,103822,104311,104796,105278,105755,106228,106697,107162,107623,108080,108533,108982,109427,109867,110304,110736,111164,111588,112008,112424,112835,113242,113645,114044,114438,114828,115213,115595,115972,116344,116712,117076,117436,117791,118141,118487,118829,119166,119499,119827,120150,120470,120784,121094,121400,121701,121997,122289,122576,122858,123136,123410,123678,123942,124201,124456,124706,124951,125192,125428,125659,125885,126107,126324,126536,126743,126946,127143,127336,127525,127708,127887,128061,128230,128394,128553,128707,128857,129002,129142,129277,129407,129532,129653,129768,129879,129985,130086,130182,130273,130359,130440,130517,130588,130655,130716,130773,130825,130872,130914,130951,130983,131010,131032,131049,131062,131069,131072,131069,131062,131049,131032,131010,130983,130951,130914,130872,130825,130773,130716,130655,130588,130517,130440,130359,130273,130182,130086,129985,129879,129768,129653,129532,129407,129277,129142,129002,128857,128707,128553,128394,128230,128061,127887,127708,127525,127336,127143,126946,126743,126536,126324,126107,125885,125659,125428,125192,124951,124706,124456,124201,123942,123678,123410,123136,122858,122576,122289,121997,121701,121400,121094,120784,120470,120150,119827,119499,119166,118829,118487,118141,117791,117436,117076,116712,116344,115972,115595,115213,114828,114438,114044,113645,113242,112835,112424,112008,111588,111164,110736,110304,109867,109427,108982,108533,108080,107623,107162,106697,106228,105755,105278,104796,104311,103822,103330,102833,102332,101828,101320,100807,100292,99772,99248,98721,98190,97656,97117,96576,96030,95481,94928,94372,93812,93248,92681,92111,91537,90960,90379,89795,89207,88616,88022,87425,86824,86220,85612,85002,84388,83771,83151,82527,81901,81272,80639,80004,79365,78724,78079,77432,76781,76128,75472,74813,74151,73487,72819,72149,71476,70801,70123,69442,68759,68073,67384,66693,65999,65303,64605,63904,63200,62495,61786,61076,60363,59648,58931,58211,57490,56766,56040,55312,54582,53850,53115,52379,51641,50901,50159,49415,48669,47921,47172,46420,45667,44913,44156,43398,42639,41877,41114,40350,39584,38817,38048,37277,36506,35733,34958,34182,33405,32627,31847,31067,30285,29502,28718,27932,27146,26359,25570,24781,23991,23200,22408,21615,20821,20027,19232,18436,17639,16842,16044,15246,14447,13647,12847,12046,11245,10444,9642,8840,8037,7234,6431,5628,4824,4020,3216,2412,1608,804,0,-804,-1608,-2412,-3216,-4020,-4824,-5628,-6431,-7234,-8037,-8840,-9642,-10444,-11245,-12046,-12847,-13647,-14447,-15246,-16044,-16842,-17639,-18436,-19232,-20027,-20821,-21615,-22408,-23200,-23991,-24781,-25570,-26359,-27146,-27932,-28718,-29502,-30285,-31067,-31847,-32627,-33405,-34182,-34958,-35733,-36506,-37277,-38048,-38817,-39584,-40350,-41114,-41877,-42639,-43398,-44156,-44913,-45667,-46420,-47172,-47921,-48669,-49415,-50159,-50901,-51641,-52379,-53115,-53850,-54582,-55312,-56040,-56766,-57490,-58211,-58931,-59648,-60363,-61076,-61786,-62495,-63200,-63904,-64605,-65303,-65999,-66693,-67384,-68073,-68759,-69442,-70123,-70801,-71476,-72149,-72819,-73487,-74151,-74813,-75472,-76128,-76781,-77432,-78079,-78724,-79365,-80004,-80639,-81272,-81901,-82527,-83151,-83771,-84388,-85002,-85612,-86220,-86824,-87425,-88022,-88616,-89207,-89795,-90379,-90960,-91537,-92111,-92681,-93248,-93812,-94372,-94928,-95481,-96030,-96576,-97117,-97656,-98190,-98721,-99248,-99772,-100292,-100807,-101320,-101828,-102332,-102833,-103330,-103822,-104311,-104796,-105278,-105755,-106228,-106697,-107162,-107623,-108080,-108533,-108982,-109427,-109867,-110304,-110736,-111164,-111588,-112008,-112424,-112835,-113242,-113645,-114044,-114438,-114828,-115213,-115595,-115972,-116344,-116712,-117076,-117436,-117791,-118141,-118487,-118829,-119166,-119499,-119827,-120150,-120470,-120784,-121094,-121400,-121701,-121997,-122289,-122576,-122858,-123136,-123410,-123678,-123942,-124201,-124456,-124706,-124951,-125192,-125428,-125659,-125885,-126107,-126324,-126536,-126743,-126946,-127143,-127336,-127525,-127708,-127887,-128061,-128230,-128394,-128553,-128707,-128857,-129002,-129142,-129277,-129407,-129532,-129653,-129768,-129879,-129985,-130086,-130182,-130273,-130359,-130440,-130517,-130588,-130655,-130716,-130773,-130825,-130872,-130914,-130951,-130983,-131010,-131032,-131049,-131062,-131069,-131072,-131069,-131062,-131049,-131032,-131010,-130983,-130951,-130914,-130872,-130825,-130773,-130716,-130655,-130588,-130517,-130440,-130359,-130273,-130182,-130086,-129985,-129879,-129768,-129653,-129532,-129407,-129277,-129142,-129002,-128857,-128707,-128553,-128394,-128230,-128061,-127887,-127708,-127525,-127336,-127143,-126946,-126743,-126536,-126324,-126107,-125885,-125659,-125428,-125192,-124951,-124706,-124456,-124201,-123942,-123678,-123410,-123136,-122858,-122576,-122289,-121997,-121701,-121400,-121094,-120784,-120470,-120150,-119827,-119499,-119166,-118829,-118487,-118141,-117791,-117436,-117076,-116712,-116344,-115972,-115595,-115213,-114828,-114438,-114044,-113645,-113242,-112835,-112424,-112008,-111588,-111164,-110736,-110304,-109867,-109427,-108982,-108533,-108080,-107623,-107162,-106697,-106228,-105755,-105278,-104796,-104311,-103822,-103330,-102833,-102332,-101828,-101320,-100807,-100292,-99772,-99248,-98721,-98190,-97656,-97117,-96576,-96030,-95481,-94928,-94372,-93812,-93248,-92681,-92111,-91537,-90960,-90379,-89795,-89207,-88616,-88022,-87425,-86824,-86220,-85612,-85002,-84388,-83771,-83151,-82527,-81901,-81272,-80639,-80004,-79365,-78724,-78079,-77432,-76781,-76128,-75472,-74813,-74151,-73487,-72819,-72149,-71476,-70801,-70123,-69442,-68759,-68073,-67384,-66693,-65999,-65303,-64605,-63904,-63200,-62495,-61786,-61076,-60363,-59648,-58931,-58211,-57490,-56766,-56040,-55312,-54582,-53850,-53115,-52379,-51641,-50901,-50159,-49415,-48669,-47921,-47172,-46420,-45667,-44913,-44156,-43398,-42639,-41877,-41114,-40350,-39584,-38817,-38048,-37277,-36506,-35733,-34958,-34182,-33405,-32627,-31847,-31067,-30285,-29502,-28718,-27932,-27146,-26359,-25570,-24781,-23991,-23200,-22408,-21615,-20821,-20027,-19232,-18436,-17639,-16842,-16044,-15246,-14447,-13647,-12847,-12046,-11245,-10444,-9642,-8840,-8037,-7234,-6431,-5628,-4824,-4020,-3216,-2412,-1608,-804};
    reg [OUTPUT_BITS-1:0] cos_lut[2**LUT_DEPTH_BITS - 1:0]={131072,131069,131062,131049,131032,131010,130983,130951,130914,130872,130825,130773,130716,130655,130588,130517,130440,130359,130273,130182,130086,129985,129879,129768,129653,129532,129407,129277,129142,129002,128857,128707,128553,128394,128230,128061,127887,127708,127525,127336,127143,126946,126743,126536,126324,126107,125885,125659,125428,125192,124951,124706,124456,124201,123942,123678,123410,123136,122858,122576,122289,121997,121701,121400,121094,120784,120470,120150,119827,119499,119166,118829,118487,118141,117791,117436,117076,116712,116344,115972,115595,115213,114828,114438,114044,113645,113242,112835,112424,112008,111588,111164,110736,110304,109867,109427,108982,108533,108080,107623,107162,106697,106228,105755,105278,104796,104311,103822,103330,102833,102332,101828,101320,100807,100292,99772,99248,98721,98190,97656,97117,96576,96030,95481,94928,94372,93812,93248,92681,92111,91537,90960,90379,89795,89207,88616,88022,87425,86824,86220,85612,85002,84388,83771,83151,82527,81901,81272,80639,80004,79365,78724,78079,77432,76781,76128,75472,74813,74151,73487,72819,72149,71476,70801,70123,69442,68759,68073,67384,66693,65999,65303,64605,63904,63200,62495,61786,61076,60363,59648,58931,58211,57490,56766,56040,55312,54582,53850,53115,52379,51641,50901,50159,49415,48669,47921,47172,46420,45667,44913,44156,43398,42639,41877,41114,40350,39584,38817,38048,37277,36506,35733,34958,34182,33405,32627,31847,31067,30285,29502,28718,27932,27146,26359,25570,24781,23991,23200,22408,21615,20821,20027,19232,18436,17639,16842,16044,15246,14447,13647,12847,12046,11245,10444,9642,8840,8037,7234,6431,5628,4824,4020,3216,2412,1608,804,0,-804,-1608,-2412,-3216,-4020,-4824,-5628,-6431,-7234,-8037,-8840,-9642,-10444,-11245,-12046,-12847,-13647,-14447,-15246,-16044,-16842,-17639,-18436,-19232,-20027,-20821,-21615,-22408,-23200,-23991,-24781,-25570,-26359,-27146,-27932,-28718,-29502,-30285,-31067,-31847,-32627,-33405,-34182,-34958,-35733,-36506,-37277,-38048,-38817,-39584,-40350,-41114,-41877,-42639,-43398,-44156,-44913,-45667,-46420,-47172,-47921,-48669,-49415,-50159,-50901,-51641,-52379,-53115,-53850,-54582,-55312,-56040,-56766,-57490,-58211,-58931,-59648,-60363,-61076,-61786,-62495,-63200,-63904,-64605,-65303,-65999,-66693,-67384,-68073,-68759,-69442,-70123,-70801,-71476,-72149,-72819,-73487,-74151,-74813,-75472,-76128,-76781,-77432,-78079,-78724,-79365,-80004,-80639,-81272,-81901,-82527,-83151,-83771,-84388,-85002,-85612,-86220,-86824,-87425,-88022,-88616,-89207,-89795,-90379,-90960,-91537,-92111,-92681,-93248,-93812,-94372,-94928,-95481,-96030,-96576,-97117,-97656,-98190,-98721,-99248,-99772,-100292,-100807,-101320,-101828,-102332,-102833,-103330,-103822,-104311,-104796,-105278,-105755,-106228,-106697,-107162,-107623,-108080,-108533,-108982,-109427,-109867,-110304,-110736,-111164,-111588,-112008,-112424,-112835,-113242,-113645,-114044,-114438,-114828,-115213,-115595,-115972,-116344,-116712,-117076,-117436,-117791,-118141,-118487,-118829,-119166,-119499,-119827,-120150,-120470,-120784,-121094,-121400,-121701,-121997,-122289,-122576,-122858,-123136,-123410,-123678,-123942,-124201,-124456,-124706,-124951,-125192,-125428,-125659,-125885,-126107,-126324,-126536,-126743,-126946,-127143,-127336,-127525,-127708,-127887,-128061,-128230,-128394,-128553,-128707,-128857,-129002,-129142,-129277,-129407,-129532,-129653,-129768,-129879,-129985,-130086,-130182,-130273,-130359,-130440,-130517,-130588,-130655,-130716,-130773,-130825,-130872,-130914,-130951,-130983,-131010,-131032,-131049,-131062,-131069,-131072,-131069,-131062,-131049,-131032,-131010,-130983,-130951,-130914,-130872,-130825,-130773,-130716,-130655,-130588,-130517,-130440,-130359,-130273,-130182,-130086,-129985,-129879,-129768,-129653,-129532,-129407,-129277,-129142,-129002,-128857,-128707,-128553,-128394,-128230,-128061,-127887,-127708,-127525,-127336,-127143,-126946,-126743,-126536,-126324,-126107,-125885,-125659,-125428,-125192,-124951,-124706,-124456,-124201,-123942,-123678,-123410,-123136,-122858,-122576,-122289,-121997,-121701,-121400,-121094,-120784,-120470,-120150,-119827,-119499,-119166,-118829,-118487,-118141,-117791,-117436,-117076,-116712,-116344,-115972,-115595,-115213,-114828,-114438,-114044,-113645,-113242,-112835,-112424,-112008,-111588,-111164,-110736,-110304,-109867,-109427,-108982,-108533,-108080,-107623,-107162,-106697,-106228,-105755,-105278,-104796,-104311,-103822,-103330,-102833,-102332,-101828,-101320,-100807,-100292,-99772,-99248,-98721,-98190,-97656,-97117,-96576,-96030,-95481,-94928,-94372,-93812,-93248,-92681,-92111,-91537,-90960,-90379,-89795,-89207,-88616,-88022,-87425,-86824,-86220,-85612,-85002,-84388,-83771,-83151,-82527,-81901,-81272,-80639,-80004,-79365,-78724,-78079,-77432,-76781,-76128,-75472,-74813,-74151,-73487,-72819,-72149,-71476,-70801,-70123,-69442,-68759,-68073,-67384,-66693,-65999,-65303,-64605,-63904,-63200,-62495,-61786,-61076,-60363,-59648,-58931,-58211,-57490,-56766,-56040,-55312,-54582,-53850,-53115,-52379,-51641,-50901,-50159,-49415,-48669,-47921,-47172,-46420,-45667,-44913,-44156,-43398,-42639,-41877,-41114,-40350,-39584,-38817,-38048,-37277,-36506,-35733,-34958,-34182,-33405,-32627,-31847,-31067,-30285,-29502,-28718,-27932,-27146,-26359,-25570,-24781,-23991,-23200,-22408,-21615,-20821,-20027,-19232,-18436,-17639,-16842,-16044,-15246,-14447,-13647,-12847,-12046,-11245,-10444,-9642,-8840,-8037,-7234,-6431,-5628,-4824,-4020,-3216,-2412,-1608,-804,0,804,1608,2412,3216,4020,4824,5628,6431,7234,8037,8840,9642,10444,11245,12046,12847,13647,14447,15246,16044,16842,17639,18436,19232,20027,20821,21615,22408,23200,23991,24781,25570,26359,27146,27932,28718,29502,30285,31067,31847,32627,33405,34182,34958,35733,36506,37277,38048,38817,39584,40350,41114,41877,42639,43398,44156,44913,45667,46420,47172,47921,48669,49415,50159,50901,51641,52379,53115,53850,54582,55312,56040,56766,57490,58211,58931,59648,60363,61076,61786,62495,63200,63904,64605,65303,65999,66693,67384,68073,68759,69442,70123,70801,71476,72149,72819,73487,74151,74813,75472,76128,76781,77432,78079,78724,79365,80004,80639,81272,81901,82527,83151,83771,84388,85002,85612,86220,86824,87425,88022,88616,89207,89795,90379,90960,91537,92111,92681,93248,93812,94372,94928,95481,96030,96576,97117,97656,98190,98721,99248,99772,100292,100807,101320,101828,102332,102833,103330,103822,104311,104796,105278,105755,106228,106697,107162,107623,108080,108533,108982,109427,109867,110304,110736,111164,111588,112008,112424,112835,113242,113645,114044,114438,114828,115213,115595,115972,116344,116712,117076,117436,117791,118141,118487,118829,119166,119499,119827,120150,120470,120784,121094,121400,121701,121997,122289,122576,122858,123136,123410,123678,123942,124201,124456,124706,124951,125192,125428,125659,125885,126107,126324,126536,126743,126946,127143,127336,127525,127708,127887,128061,128230,128394,128553,128707,128857,129002,129142,129277,129407,129532,129653,129768,129879,129985,130086,130182,130273,130359,130440,130517,130588,130655,130716,130773,130825,130872,130914,130951,130983,131010,131032,131049,131062,131069};

    // Initialization of LUTs (This should be replaced with actual values)
   

    // Linear interpolation
    always @(posedge clk or negedge resetn) begin
        if (!resetn) begin
            sineTheta <= 0;
            validOut <= 0;
        end else if (validIn) begin
            // Extracting 10 MSB for LUT addressing and 6 LSB for linear interpolation
            wire [LUT_DEPTH_BITS-1:0] addr = theta[INPUT_BITS-1 -: LUT_DEPTH_BITS];
            wire [5:0] fractional = theta[5:0];

            // Linear interpolation formula
            sineTheta <= sine_lut[addr] + (fractional * cos_lut[addr]);
            validOut <= 1;
        end else begin
            validOut <= 0;
        end
    end

endmodule

